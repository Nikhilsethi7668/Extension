<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shifty Auto Lister</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="hero">
      <div>
        <p class="eyebrow">Marketplace Automation</p>
        <h1>AutoBridge</h1>
        <p class="subhead">Stealth scrape, AI-perfect, post in minutes.</p>
      </div>
      <div class="badge">v1.0.0</div>
    </div>

    <!-- Login Section -->
    <div id="loginSection" class="card glass">
      <div class="card-header">
        <div>
          <p class="eyebrow">Secure Access</p>
          <h3>Sign in to launch</h3>
        </div>
        <span class="pill subtle">Demo: demo / demo</span>
      </div>
      <div class="form-grid">
        <label class="field">
          <span>User ID</span>
          <input type="text" id="userId" placeholder="Enter your User ID" />
        </label>
        <label class="field">
          <span>Password</span>
          <input type="password" id="password" placeholder="Enter your password" />
        </label>
      </div>
      <button class="btn primary full" id="loginBtn">Continue</button>
    </div>

    <!-- Main Controls -->
    <div id="mainControls" style="display: none;" class="stack">
      <div class="card glass status-bar">
        <div>
          <p class="eyebrow">Session</p>
          <h4 id="statusText">Logged in</h4>
        </div>
        <div class="chip-row">
          <button class="btn ghost" id="testConnectionBtn">üîå Test Backend</button>
          <button class="btn ghost" id="logoutBtn">Logout</button>
        </div>
      </div>
      <div id="connectionStatus" class="callout"></div>

      <!-- Flow selector -->
      <div class="flow-grid">
        <div class="flow-card" data-flow="compose" id="flowCardCompose">
          <div>
            <p class="eyebrow">Flow 1</p>
            <h3>Compose & Post</h3>
            <p class="muted">Configure AI, set posting targets, and prep a listing.</p>
          </div>
          <span class="pill">Recommended</span>
        </div>
        <div class="flow-card" data-flow="queue" id="flowCardQueue">
          <div>
            <p class="eyebrow">Flow 2</p>
            <h3>Queue & Activity</h3>
            <p class="muted">Inspect queue, review activity, and rerun jobs.</p>
          </div>
          <span class="pill subtle">Review</span>
        </div>
      </div>

      <!-- Compose Flow -->
      <div id="flowCompose" class="flow active">
        <div class="card glass">
          <div class="grid-3">
            <label class="field">
              <span>Vehicle Category</span>
              <select id="vehicleCategory">
                <option value="car">üöó Car</option>
                <option value="truck">üöô Truck</option>
                <option value="suv">üöê SUV</option>
                <option value="van">üöö Van</option>
                <option value="motorcycle">üèçÔ∏è Motorcycle</option>
                <option value="other">Other</option>
              </select>
            </label>
            <label class="field">
              <span>Emoji</span>
              <select id="emojiStyle">
                <option value="none">None</option>
                <option value="sparkle">‚ú® Sparkle</option>
                <option value="fire">üî• Fire</option>
                <option value="star">‚≠ê Star</option>
              </select>
            </label>
            <label class="field">
              <span>Distance</span>
              <select id="distance">
                <option value="20">20 Miles</option>
                <option value="40">40 Miles</option>
                <option value="60">60 Miles</option>
                <option value="100">100 Miles</option>
              </select>
            </label>
          </div>

          <div class="grid-2">
            <label class="field">
              <span>Where to Post</span>
              <select id="whereToPost">
                <option value="marketplace">FB Marketplace</option>
                <option value="marketplace_groups">Marketplace + Groups</option>
                <option value="groups">Groups Only</option>
              </select>
            </label>
            <label class="field">
              <span>Sales Consultant</span>
              <input type="text" id="consultantName" placeholder="Shifty-Ai" />
            </label>
          </div>

          <div class="card-section">
            <div class="chip-row wrap">
              <label class="checkbox"><input type="checkbox" id="aiWrittenDesc" checked /> A.I. Written description</label>
              <label class="checkbox"><input type="checkbox" id="addMileage" checked /> Add mileage</label>
              <label class="checkbox"><input type="checkbox" id="addDealerInfo" /> Add dealership info</label>
            </div>
            <textarea id="aiInstructions" rows="2" placeholder="Custom AI instructions..."></textarea>
          </div>

          <div class="grid-2">
            <label class="field">
              <span>API Key</span>
              <input type="password" id="apiKey" placeholder="API Key" />
            </label>
            <label class="field">
              <span class="checkbox"><input type="checkbox" id="addStockNumber" /> Add Stock Number</span>
              <input type="text" id="stockNumber" placeholder="Stock #" style="display: none;" />
            </label>
          </div>

          <div class="btn-row">
            <button class="btn primary" id="loadVehiclesBtn">Load Vehicles</button>
            <button class="btn ghost" id="postedVehiclesBtn">Posted Vehicles</button>
          </div>
        </div>
      </div>

      <!-- Queue / Activity Flow -->
      <div id="flowQueue" class="flow">
        <div class="card glass">
          <div class="section-header">
            <div>
              <p class="eyebrow">Queue</p>
              <h3>üìù Queue (<span id="queueCount">0</span>)</h3>
            </div>
            <p class="muted">Tracks scraped listings awaiting post.</p>
          </div>
          <div id="queueList" class="queue-list"></div>
        </div>

        <div class="card glass">
          <div class="section-header">
            <div>
              <p class="eyebrow">Activity</p>
              <h3>üìä Activity</h3>
            </div>
            <p class="muted">Live log of scrape, AI, and post events.</p>
          </div>
          <div id="activityLog" class="activity-log"></div>
        </div>
      </div>
    </div>

    <div class="footer">AutoBridge ¬∑ Built for FB Marketplace</div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
